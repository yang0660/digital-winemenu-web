<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.myicellar.digitalmenu.dao.mapper.RestaurantMapperExt">
    <resultMap id="BaseResultMap" type="com.myicellar.digitalmenu.dao.entity.Restaurant"
               extends="com.myicellar.digitalmenu.dao.mapper.RestaurantMapper.BaseResultMap">
    </resultMap>
    <sql id="Base_Column_List">
        <include refid="com.myicellar.digitalmenu.dao.mapper.RestaurantMapper.Base_Column_List"></include>
    </sql>
    <select id="queryListByParam" parameterType="com.myicellar.digitalmenu.vo.request.RestaurantListReqVO"
            resultMap="BaseResultMap">
        select
        <include refid="Base_Column_List"/>
        from t_restaurant
        <where>
            <if test="restaurantName!=null and restaurantName!=''">
                restaurant_name_chs like concat('%',#{restaurantName},'%') or
                restaurant_name_cht like concat('%',#{restaurantName},'%') or
                restaurant_name_eng like concat('%',#{restaurantName},'%')
            </if>
        </where>
        limit #{offset,jdbcType=INTEGER}, #{pageSize,jdbcType=INTEGER}
    </select>

    <select id="queryCountByParam" parameterType="com.myicellar.digitalmenu.vo.request.RestaurantListReqVO"
            resultType="java.lang.Long">
        select count(0)
        from t_restaurant
        <where>
            <if test="restaurantName!=null and restaurantName!=''">
                restaurant_name_chs like concat('%',#{restaurantName},'%') or
                restaurant_name_cht like concat('%',#{restaurantName},'%') or
                restaurant_name_eng like concat('%',#{restaurantName},'%')
            </if>
        </where>
    </select>

    <select id="selectByRestaurantNames" parameterType="com.myicellar.digitalmenu.vo.request.RestaurantReqVO"
            resultMap="BaseResultMap">
        select
        <include refid="Base_Column_List"/>
        from t_restaurant
        <where>
            restaurant_name_chs = #{restaurantNameChs} or
            restaurant_name_cht = #{restaurantNameCht} or
            restaurant_name_eng = #{restaurantNameEng}
        </where>
        limit 1
    </select>


</mapper>